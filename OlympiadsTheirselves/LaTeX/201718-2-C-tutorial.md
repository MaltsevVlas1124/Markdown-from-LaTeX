# Розбір задачі

**Скільки повинен набирати очевидний розв'язок «перебрати всі&nbsp;чи́сла від&nbsp;1 до&nbsp;~N-1~, розібрати кожне на&nbsp;цифри, й&nbsp;подивитися, чи&nbsp;всі&nbsp;ці&nbsp;цифри з&nbsp;набору 1, 2, 4, 8?»** Приблизно 100&nbsp;балів з&nbsp;300. Точна величина залежить від&nbsp;мови програмування (це&nbsp;впливає на&nbsp;швидкість) та&nbsp;деталей реалізації цього підходу.

**А&nbsp;як набрати більше?**
Ця задача має багато спільного з&nbsp;задачами «Генератор паролів» та&nbsp;«Сучасне мистецтво». Деталі додумайте самостійно, враховуючи це&nbsp;та&nbsp;наведений далі&nbsp;приклад ручного аналізу. (Можливі й&nbsp;інші розв'язки цієї задачі; деякі з&nbsp;них теж достатньо ефективні, щоб&nbsp;пройти всі&nbsp;тести, вклавшись у&nbsp;обмеження часу, але&nbsp;ж далеко&nbsp;не&nbsp;всі.)

**Навіщо виділено випадок ~N=10^T~?**
У&nbsp;цьому частковому випадку задача має простий комбінаторний розв'язок: ~4 + 4^2 + \dots + 4^T~, або&nbsp;~4 \cdot \frac{4^T-1}{4-1}~. Наприклад, при&nbsp;~N = 10000~ можна сказати, що&nbsp;відповіддю є сумарна кількість 1-значних, 2-значних, 3-значних&nbsp;та&nbsp;4-значних «цікавих» чисел. Однозначних «цікавих» чисел чотири, бо&nbsp;це&nbsp;і&nbsp;є цифри 1, 2, 4, 8. Двозначних «цікавих» чисел шістнадцять; це&nbsp;можна підтвердити їх повним переліком (11, 12, 14, 18, 21, 22, 24, 28, 41, 42, 44, 48, 81, 82, 84, 88), але&nbsp;корисніше отримати цей результат так: є дві&nbsp;позиції, на&nbsp;кожну можна поставити будь-яку з&nbsp;чотирьох цифр 1, або&nbsp;2, або&nbsp;4, або&nbsp;8; кожна&nbsp;з&nbsp;цифр на&nbsp;першій позиції може поєднуватися з&nbsp;будь-якою з&nbsp;цифр на&nbsp;другій позиції — отже, кількість пар може бути обчислена як&nbsp;~4&nbsp;×&nbsp;4&nbsp;=&nbsp;16~. Аналогічно, 3-значних «цікавих» чисел є ~4^3&nbsp;=&nbsp;64~, 4-значних ~4^4&nbsp;=&nbsp;256~, а&nbsp;менших за&nbsp;~10^4~ є ~4 + 16 + 64 + 256 = 340~.

**Приклад ручного аналізу цієї задачі.**
Знайдемо кількість «цікавих» чисел, менших 8432.
Це, зокрема, всі&nbsp;1-, 2- та&nbsp;3-значні «цікаві», їх ~4 + 4^2 + 4^3 = 84~.
Крім того, раз старша цифра дорівнює 8, треба врахувати ще&nbsp;всі&nbsp;4-значні «цікаві», що&nbsp;починаються з&nbsp;1, 2&nbsp;або&nbsp;4 (їх у&nbsp;кожній з&nbsp;цих трьох груп по&nbsp;~4^3=64~, тобто&nbsp;всього 192; разом&nbsp;з&nbsp;раніше&nbsp;згаданими це&nbsp;~84 + 192 = 276~), і&nbsp;додати до&nbsp;них ті&nbsp;4-значні «цікаві», які починаються з&nbsp;8&nbsp;і&nbsp;при&nbsp;цьому менші 8432. Оскільки початкова «8» тепер зафіксована, вона не&nbsp;впливає на&nbsp;кількість, можна рахувати все&nbsp;одно як&nbsp;кількість усіх&nbsp;3-начних «цікавих», менших 432. Цілком аналогічно виділяємо окремо всі&nbsp;3-значні «цікаві», що&nbsp;починаються з&nbsp;1&nbsp;або&nbsp;2 (їх у&nbsp;кожній з&nbsp;цих двох груп по&nbsp;~4^2&nbsp;=&nbsp;16~, тобто&nbsp;всього 32; разом&nbsp;з&nbsp;раніше&nbsp;згаданими це&nbsp;~276 + 32 = 308~). Лишається порахувати кількість 3-значних «цікавих», які починаються з&nbsp;4&nbsp;і&nbsp;при&nbsp;цьому менші 432. Знову, початкова «4» зафіксована&nbsp;й&nbsp;не впливає на&nbsp;кількість, так&nbsp;що рахуємо кількість 2-значних «цікавих», менших 32. Цілком аналогічно виділяємо окремо всі&nbsp;2-значні «цікаві», що&nbsp;починаються з&nbsp;1&nbsp;або&nbsp;2 (їх у&nbsp;кожній з&nbsp;цих двох груп по&nbsp;~4^1&nbsp;=&nbsp;4~, тобто&nbsp;всього 8; разом&nbsp;з&nbsp;раніше&nbsp;згаданими це&nbsp;~308 + 8 = 316~). Тільки тепер, хоча цифри ще&nbsp;не&nbsp;скінчилися, процес обривається, бо&nbsp;«цікаві» числа все&nbsp;одно не&nbsp;можуть містити цифру 3. Так&nbsp;що відповіддю є 316.

**А&nbsp;чим відрізняється останній блок від&nbsp;передостаннього?**
З&nbsp;точки зору пропонованого алгоритму — майже нічим. Але відмінність є з&nbsp;точки зору іншого алгоритму: генерувати всі&nbsp;підряд лише «цікаві» числа, доки&nbsp;не&nbsp;дійде до&nbsp;вказаної межі́. Такий алгоритм може пройти тести передостаннього блоку, але&nbsp;тести останнього повинні не&nbsp;вкладатися в&nbsp;ліміт часу.

