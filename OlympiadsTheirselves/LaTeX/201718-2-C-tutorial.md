# Розбір задачі

**Скільки повинен набирати очевидний розв'язок «перебрати всі числа від 1 до ~N-1~, розібрати кожне на цифри, й подивитися, чи всі ці цифри з набору 1, 2, 4, 8?»** Приблизно 100 балів з 300. Точна величина залежить від мови програмування (це впливає на швидкість) та деталей реалізації цього підходу.

**А як набрати більше?**
Ця задача має багато спільного з задачами «Генератор паролів» та «Сучасне мистецтво». Деталі додумайте самостійно, враховуючи це та наведений далі приклад ручного аналізу. (Можливі й інші розв'язки цієї задачі; деякі з них теж достатньо ефективні, щоб пройти всі тести, вклавшись у обмеження часу, але ж далеко не всі.)

**Навіщо виділено випадок ~N=10^T~?**
У цьому частковому випадку задача має простий комбінаторний розв'язок: ~4 + 4^2 + \dots + 4^T~, або ~4 \cdot \frac{4^T-1}{4-1}~. Наприклад, при ~N = 10000~ можна сказати, що відповіддю є сумарна кількість 1-значних, 2-значних, 3-значних та 4-значних «цікавих» чисел. Однозначних «цікавих» чисел чотири, бо це і є цифри 1, 2, 4, 8. Двозначних «цікавих» чисел шістнадцять; це можна підтвердити їх повним переліком (11, 12, 14, 18, 21, 22, 24, 28, 41, 42, 44, 48, 81, 82, 84, 88), але корисніше отримати цей результат так: є дві позиції, на кожну можна поставити будь-яку з чотирьох цифр 1, або 2, або 4, або 8; кожна з цифр на першій позиції може поєднуватися з будь-якою з цифр на другій позиції --- отже, кількість пар може бути обчислена як ~4 \times 4 = 16~. Аналогічно, 3-значних «цікавих» чисел є ~4^3 = 64~, 4-значних ~4^4 = 256~, а менших за ~10^4~ є ~4 + 16 + 64 + 256 = 340~.

**Приклад ручного аналізу цієї задачі.**
Знайдемо кількість «цікавих» чисел, менших 8432.
Це, зокрема, всі 1-, 2- та 3-значні «цікаві», їх ~4 + 4^2 + 4^3 = 84~.
Крім того, раз старша цифра дорівнює 8, треба врахувати ще всі 4-значні «цікаві», що починаються з 1, 2 або 4 (їх у кожній з цих трьох груп по ~4^3=64~, тобто всього 192; разом з раніше згаданими це ~84 + 192 = 276~), і додати до них ті 4-значні «цікаві», які починаються з 8 і при цьому менші 8432. Оскільки початкова «8» тепер зафіксована, вона не впливає на кількість, можна рахувати все одно як кількість усіх 3-начних «цікавих», менших 432. Цілком аналогічно виділяємо окремо всі 3-значні «цікаві», що починаються з 1 або 2 (їх у кожній з цих двох груп по ~4^2 = 16~, тобто всього 32; разом з раніше згаданими це ~276 + 32 = 308~). Лишається порахувати кількість 3-значних «цікавих», які починаються з 4 і при цьому менші 432. Знову, початкова «4» зафіксована й не впливає на кількість, так що рахуємо кількість 2-значних «цікавих», менших 32. Цілком аналогічно виділяємо окремо всі 2-значні «цікаві», що починаються з 1 або 2 (їх у кожній з цих двох груп по ~4^1 = 4~, тобто всього 8; разом з раніше згаданими це ~308 + 8 = 316~). Тільки тепер, хоча цифри ще не скінчилися, процес обривається, бо «цікаві» числа все одно не можуть містити цифру 3. Так що відповіддю є 316.

**А чим відрізняється останній блок від передостаннього?**
З точки зору пропонованого алгоритму --- майже нічим. Але відмінність є з точки зору іншого алгоритму: генерувати всі підряд лише «цікаві» числа, доки не дійде до вказаної межі. Такий алгоритм може пройти тести передостаннього блоку, але тести останнього повинні не вкладатися в ліміт часу.